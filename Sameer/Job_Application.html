<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Job Application - Portal</title>
  <style>
    :root{
      --bg:#f6f8fb;
      --card:#ffffff;
      --muted:#6b7280;
      --accent:#2563eb;
      --success:#16a34a;
      --danger:#dc2626;
      --glass: rgba(255,255,255,0.6);
      --radius:14px;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }

    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#eef2ff 0%,var(--bg) 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;padding:32px}

    .container{width:100%;max-width:940px}
    .card{
      background:var(--card);
      border-radius:var(--radius);
      padding:28px;
      box-shadow:0 10px 30px rgba(16,24,40,0.08);
      transition:transform 280ms cubic-bezier(.2,.9,.3,1), box-shadow 280ms;
      overflow:hidden;
    }
    .card:hover{transform:translateY(-6px);box-shadow:0 20px 40px rgba(16,24,40,0.12)}

    .header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    .title{font-size:20px;font-weight:700;color:#0f172a}
    .subtitle{color:var(--muted);font-size:13px}

    form{display:grid;grid-template-columns:1fr 1fr;gap:16px}
    .full{grid-column:1/3}

    label{display:block;font-size:13px;color:#0f172a;margin-bottom:8px}
    input[type=text], input[type=date], input[type=email], input[type=number], select, textarea, input[type=file], input[type=time]{
      width:100%;padding:12px 14px;border-radius:10px;border:1px solid #e6e9ef;background:transparent;outline:none;font-size:14px;
      transition:box-shadow 160ms, border-color 160ms, transform 160ms;
    }
    input:focus, select:focus, textarea:focus{box-shadow:0 6px 18px rgba(37,99,235,0.08);border-color:var(--accent)}

    .hint{font-size:12px;color:var(--muted);margin-top:6px}

    .row{display:flex;gap:12px}
    .chip{display:inline-flex;align-items:center;padding:8px 12px;border-radius:999px;border:1px solid #eef2ff;background:#fbfdff;font-size:13px}

    .actions{display:flex;gap:12px;justify-content:flex-end;align-items:center;margin-top:18px}
    button{background:var(--accent);color:white;padding:10px 16px;border-radius:10px;border:none;font-weight:600;cursor:pointer;transition:transform 160ms, box-shadow 160ms}
    button:hover{transform:translateY(-3px);box-shadow:0 10px 30px rgba(37,99,235,0.12)}
    button.secondary{background:transparent;color:var(--accent);border:1px solid rgba(37,99,235,0.12)}

    .file-preview{font-size:13px;color:var(--muted);margin-top:8px}
    .error{color:var(--danger);font-size:13px;margin-top:6px}
    .success{color:var(--success);font-size:13px;margin-top:6px}

    /* responsive */
    @media (max-width:760px){form{grid-template-columns:1fr} .full{grid-column:auto}}

    /* subtle hover on field labels */
    label:hover{color:var(--accent)}

    /* nice select style */
    select{appearance:none;background-image:linear-gradient(45deg, transparent 50%, var(--muted) 50%), linear-gradient(135deg, var(--muted) 50%, transparent 50%);background-position:calc(100% - 18px) calc(1em + 2px), calc(100% - 13px) calc(1em + 2px);background-size:6px 6px,6px 6px;background-repeat:no-repeat;padding-right:36px}

    /* subtle step indicator */
    .meta{display:flex;gap:12px;align-items:center}
    .pill{padding:8px 12px;border-radius:999px;background:linear-gradient(180deg,#f8fafc,#fff);border:1px solid #eef2ff;font-size:13px}

    .optional{opacity:0.95;border-left:3px dashed #e6eefc;padding-left:12px}
    .small{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="container">
    <div class="card" role="region" aria-labelledby="app-title">
      <div class="header">
        <div>
          <div id="app-title" class="title">Job Application Form</div>
          <div class="subtitle">Clean UI — required fields validated, optional fields for freshers, resume upload</div>
        </div>
        <div class="meta">
          <div class="pill">Portal: Job Portal</Portal></div>
          <div class="pill">Version: 1.0</div>
        </div>
      </div>

      <form id="applicationForm" novalidate>
        <!-- Identifiers -->
        <div>
          <label for="applicationId">Application ID <span class="small">(required)</span></label>
          <input id="applicationId" name="applicationId" type="text" placeholder="APP-2025-0001" required pattern="^[A-Za-z0-9\-]{4,30}$" />
          <div class="hint">Unique application id (alphanumeric & hyphen). Server-side must also check uniqueness.</div>
        </div>

        <div>
          <label for="candidateId">Candidate ID <span class="small">(required)</span></label>
          <input id="candidateId" name="candidateId" type="text" placeholder="CAND-562" required />
        </div>

        <div>
          <label for="jobId">Job ID <span class="small">(No required)</span></label>
          <input id="jobId" name="jobId" type="text" placeholder="JOB-110" />
        </div>

        <div>
          <label for="appliedDate">Applied Date <span class="small">(required)</span></label>
          <input id="appliedDate" name="appliedDate" type="date" required />
        </div>

        <!-- stages and rounds -->
        <div>
          <label for="stages">Stage <span class="small">(required)</span></label>
          <select id="stages" name="stages" required>
            <option value="">-- Select stage --</option>
            <option>Applied</option>
            <option>Phone Screen</option>
            <option>HR Round</option>
            <option>Technical Round</option>
            <option>Offer</option>
            <option>Rejected</option>
          </select>
        </div>

        <div>
          <label for="hrRound">HR Round</label>
          <input id="hrRoundDate" name="hrRoundDate" type="date" placeholder="HR round date (if scheduled)" />
          <div style="height:6px"></div>
          <input id="hrRoundTime" name="hrRoundTime" type="time" />
          <div class="hint">You can add date & time for HR round. Leave empty if not scheduled.</div>
        </div>

        <div>
          <label for="offer">Offer Status <span class="small">(required)</span></label>
          <select id="offer" name="offer" required>
            <option value="">-- Select --</option>
            <option>Pending</option>
            <option>Offered</option>
            <option>Accepted</option>
            <option>Declined</option>
          </select>
        </div>

        <div>
          <label for="salary">Offered CTC (if any)</label>
          <input id="salary" name="salary" type="number" min="0" placeholder="e.g. 450000" />
          <div class="hint small">Optional — only fill if you have an offer/salary decided.</div>
        </div>

        <!-- Candidate contact -->
        <div class="full">
          <label for="email">Candidate Email <span class="small">(required)</span></label>
          <input id="email" name="email" type="email" placeholder="candidate@example.com" required />
        </div>

        <div class="full">
          <label for="notes">Notes (internal)</label>
          <textarea id="notes" name="notes" rows="3" placeholder="Interview notes, feedback, next steps" style="resize:vertical;padding:12px 14px;border-radius:10px;border:1px solid #e6e9ef"></textarea>
        </div>

        <!-- Fresher toggle and optional fields -->
        <div>
          <label for="isFresher">Is Fresher?</label>
          <div class="row">
            <div class="chip">
              <input id="isFresher" type="checkbox" style="margin-right:8px" /> Freshers (hide experience fields)
            </div>
          </div>
          <div class="hint">Tick this if candidate is a fresher — certain fields become optional/hidden.</div>
        </div>

        <div id="experienceBlock">
          <label for="experience">Total Experience (years)</label>
          <input id="experience" name="experience" type="number" min="0" step="0.1" placeholder="e.g. 2.5" />
          <div class="hint small">If fresher, you can leave this empty.</div>
        </div>

        <div id="currentCompanyBlock">
          <label for="currentCompany">Current Company</label>
          <input id="currentCompany" name="currentCompany" type="text" placeholder="Company name" />
        </div>

        <!-- Resume upload -->
        <div class="full">
          <label for="resume">Upload Resume <span class="small">(PDF / DOCX, max 5MB)</span></label>
          <input id="resume" name="resume" type="file" accept="application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document" />
          <div id="fileInfo" class="file-preview small">No file chosen</div>
        </div>

        <!-- Optional handy fields -->
        <div class="optional">
          <label for="portfolio">Portfolio / GitHub</label>
          <input id="portfolio" name="portfolio" type="text" placeholder="https://github.com/username" />
          <div class="hint small">Optional — useful for freshers to show projects.</div>
        </div>

        <div class="optional">
          <label for="location">Candidate Location</label>
          <input id="location" name="location" type="text" placeholder="City, State" />
        </div>

        <!-- actions -->
        <div class="full actions">
          <button type="button" class="secondary" id="saveDraft">Save Draft</button>
          <button type="submit" id="submitBtn">Submit Application</button>
        </div>
      </form>

      <div id="statusMsg" style="margin-top:12px"></div>
    </div>
  </div>

  <script>
    // Basic client-side UX and validation enhancements
    const form = document.getElementById('applicationForm');
    const isFresherCheckbox = document.getElementById('isFresher');
    const experienceBlock = document.getElementById('experienceBlock');
    const currentCompanyBlock = document.getElementById('currentCompanyBlock');
    const resume = document.getElementById('resume');
    const fileInfo = document.getElementById('fileInfo');
    const statusMsg = document.getElementById('statusMsg');
    const saveDraft = document.getElementById('saveDraft');

    function toggleFresher(){
      const fresher = isFresherCheckbox.checked;
      experienceBlock.style.display = fresher ? 'none' : 'block';
      currentCompanyBlock.style.display = fresher ? 'none' : 'block';
    }
    toggleFresher();
    isFresherCheckbox.addEventListener('change', toggleFresher);

    resume.addEventListener('change', (e)=>{
      const f = e.target.files[0];
      if(!f){ fileInfo.textContent = 'No file chosen'; return }
      if(f.size > 5 * 1024 * 1024){ fileInfo.textContent = 'File too large (max 5MB)'; fileInfo.className='file-preview small error'; return }
      fileInfo.textContent = f.name + ' (' + Math.round(f.size/1024) + ' KB)'; fileInfo.className='file-preview small';
    });

    // Custom validation UI
    form.addEventListener('submit', function(ev){
      ev.preventDefault();
      // basic html5 validity first
      if(!form.checkValidity()){
        // find first invalid element
        const firstInvalid = form.querySelector(':invalid');
        firstInvalid.focus();
        statusMsg.innerHTML = '<div class="error">Please correct the highlighted field(s) before submitting.</div>';
        return;
      }

      // example: ensure resume present when stage is Offer or HR Round
      const stage = document.getElementById('stages').value;
      if((stage === 'HR Round' || stage === 'Offer') && !resume.files.length){
        statusMsg.innerHTML = '<div class="error">Resume is recommended for HR Round / Offer stage. Please upload.</div>';
        resume.focus();
        return;
      }

      // Gather form data (for demo; in production send via fetch to your API)
      const fd = new FormData(form);
      // show a demo success message
      statusMsg.innerHTML = '<div class="success">Application validated locally. Ready to send to server (demo).</div>';

      // TODO: use fetch('/api/applications', {method:'POST', body:fd})
      // For now we clear the form to simulate successful save
      // form.reset();
    });

    // Save draft example: store in localStorage
    saveDraft.addEventListener('click', ()=>{
      const data = {};
      new FormData(form).forEach((v,k)=>{data[k]=v});
      localStorage.setItem('app_draft', JSON.stringify(data));
      statusMsg.innerHTML = '<div class="small">Draft saved locally in browser.</div>';
    });

    // load draft if available
    window.addEventListener('load', ()=>{
      try{
        const raw = localStorage.getItem('app_draft');
        if(raw){
          const saved = JSON.parse(raw);
          Object.keys(saved).forEach(k=>{
            const el = form.elements[k];
            if(!el) return;
            try{ el.value = saved[k]; }catch(e){}
          });
        }
      }catch(e){}
    });
  </script>
</body>
</html>
